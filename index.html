<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的纪念币收藏（本地版）</title>
    <!-- 引入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 使用 Inter 字体 */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* 收藏后的视觉效果：绿色边框和复选标记 */
        .coin-card.collected .coin-check-icon {
            opacity: 1;
        }
        .coin-card.collected img {
            border: 4px solid #4CAF50; /* 绿色边框 */
        }
        /* 动画效果 */
        @keyframes fade-in-out {
            0% { opacity: 0; transform: translateY(10px); }
            10% { opacity: 1; transform: translateY(0); }
            90% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(10px); }
        }
        #save-status {
            animation: fade-in-out 3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans p-4 sm:p-8">
    <div class="max-w-7xl mx-auto py-8">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-blue-800 leading-tight">我的纪念币收藏</h1>
            <p class="text-xl sm:text-2xl mt-2 text-gray-600">点击图片标记你已拥有的纪念币</p>
            <div class="mt-4 flex flex-col sm:flex-row items-center justify-center gap-2">
                <p class="text-lg font-semibold text-gray-700" id="countDisplay">加载中...</p>
                <div class="flex items-center space-x-2 mt-4 sm:mt-0">
                    <select id="themeFilter" class="rounded-md border border-gray-300 p-2 text-sm"></select>
                    <select id="denominationFilter" class="rounded-md border border-gray-300 p-2 text-sm"></select>
                    <button id="sortOrderToggle" class="bg-blue-500 hover:bg-blue-600 text-white rounded-md p-2 text-sm flex items-center transition-colors">
                        年份倒序
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414V16a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3z" clip-rule="evenodd" /></svg>
                    </button>
                </div>
            </div>
            <p id="save-status" class="text-sm text-green-600 mt-2 opacity-0">已更新</p>
        </header>

        <main id="main-container">
            <!-- Coin list will be dynamically rendered here -->
        </main>
    </div>

    <div class="fixed bottom-4 left-4 right-4 text-center text-gray-500 text-sm">
        <p>此应用展示了纪念币收藏功能，数据存储在本地浏览器中。</p>
    </div>

    <script>
        let allCoinsData = [
            // 从 PDF 中提取的所有纪念币数据
let allCoinsData = [
    {
        "id": "JB01",
        "name": "中华人民共和国成立三十五周年",
        "year": 1984,
        "theme": "建国",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中华人民共和国成立三十五周年"
    },
    {
        "id": "JB02",
        "name": "庆祝西藏自治区成立20周年",
        "year": 1985,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=庆祝西藏自治区成立20周年"
    },
    {
        "id": "JB03",
        "name": "新疆维吾尔自治区成立30周年",
        "year": 1985,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=新疆维吾尔自治区成立30周年"
    },
    {
        "id": "JB04",
        "name": "国际和平年",
        "year": 1986,
        "theme": "国际",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=国际和平年"
    },
    {
        "id": "JB05",
        "name": "内蒙古自治区成立四十周年",
        "year": 1987,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=内蒙古自治区成立四十周年"
    },
    {
        "id": "JB06",
        "name": "中华人民共和国第六届运动会",
        "year": 1987,
        "theme": "体育",
        "denomination": "0.1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中华人民共和国第六届运动会"
    },
    {
        "id": "JB07",
        "name": "宁夏回族自治区成立三十周年",
        "year": 1988,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=宁夏回族自治区成立三十周年"
    },
    {
        "id": "JB08",
        "name": "中国人民银行成立四十周年",
        "year": 1988,
        "theme": "机构",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国人民银行成立四十周年"
    },
    {
        "id": "JB09",
        "name": "广西壮族自治区成立三十周年",
        "year": 1988,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=广西壮族自治区成立三十周年"
    },
    {
        "id": "JB10",
        "name": "中华人民共和国成立四十周年",
        "year": 1989,
        "theme": "建国",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中华人民共和国成立四十周年"
    },
    {
        "id": "JB11",
        "name": "第十一届亚洲运动会",
        "year": 1990,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第十一届亚洲运动会"
    },
    {
        "id": "JB12",
        "name": "全民义务植树运动十周年",
        "year": 1991,
        "theme": "环保",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=全民义务植树运动十周年"
    },
    {
        "id": "JB13",
        "name": "中国共产党成立七十周年",
        "year": 1991,
        "theme": "党建",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国共产党成立七十周年"
    },
    {
        "id": "JB14",
        "name": "第一届世界女子足球锦标赛",
        "year": 1991,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第一届世界女子足球锦标赛"
    },
    {
        "id": "JB15",
        "name": "宪法颁布十周年",
        "year": 1992,
        "theme": "法治",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=宪法颁布十周年"
    },
    {
        "id": "JB16",
        "name": "宋庆龄诞辰100周年",
        "year": 1993,
        "theme": "人物",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=宋庆龄诞辰100周年"
    },
    {
        "id": "JB17",
        "name": "中国珍稀野生动物--大熊猫",
        "year": 1993,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--大熊猫"
    },
    {
        "id": "JB18",
        "name": "毛泽东诞辰100周年",
        "year": 1993,
        "theme": "人物",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=毛泽东诞辰100周年"
    },
    {
        "id": "JB19",
        "name": "中国珍稀野生动物--金丝猴",
        "year": 1994,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--金丝猴"
    },
    {
        "id": "JB20",
        "name": "中国珍稀野生动物--白鳍豚",
        "year": 1995,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--白鳍豚"
    },
    {
        "id": "JB21",
        "name": "联合国成立五十周年",
        "year": 1995,
        "theme": "国际",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=联合国成立五十周年"
    },
    {
        "id": "JB22",
        "name": "抗日战争暨世界反法西斯战争胜利五十周年",
        "year": 1995,
        "theme": "历史",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=抗日战争暨世界反法西斯战争胜利五十周年"
    },
    {
        "id": "JB23",
        "name": "中国珍稀野生动物--中华鲟",
        "year": 1996,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--中华鲟"
    },
    {
        "id": "JB24",
        "name": "朱德诞辰110周年",
        "year": 1996,
        "theme": "人物",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=朱德诞辰110周年"
    },
    {
        "id": "JB25",
        "name": "第六届全国运动会",
        "year": 1996,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第六届全国运动会"
    },
    {
        "id": "JB26",
        "name": "中国珍稀野生动物--褐马鸡",
        "year": 1997,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--褐马鸡"
    },
    {
        "id": "JB27",
        "name": "香港特别行政区成立",
        "year": 1997,
        "theme": "回归",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=香港特别行政区成立"
    },
    {
        "id": "JB28",
        "name": "周恩来诞辰100周年",
        "year": 1998,
        "theme": "人物",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=周恩来诞辰100周年"
    },
    {
        "id": "JB29",
        "name": "中国珍稀野生动物--扬子鳄",
        "year": 1998,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--扬子鳄"
    },
    {
        "id": "JB30",
        "name": "中华人民共和国成立五十周年",
        "year": 1999,
        "theme": "建国",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中华人民共和国成立五十周年"
    },
    {
        "id": "JB31",
        "name": "澳门特别行政区成立",
        "year": 1999,
        "theme": "回归",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=澳门特别行政区成立"
    },
    {
        "id": "JB32",
        "name": "迎接新世纪",
        "year": 2000,
        "theme": "跨世纪",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=迎接新世纪"
    },
    {
        "id": "JB33",
        "name": "中国珍稀野生动物--朱鹮",
        "year": 2000,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--朱鹮"
    },
    {
        "id": "JB34",
        "name": "辛亥革命90周年",
        "year": 2001,
        "theme": "历史",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=辛亥革命90周年"
    },
    {
        "id": "JB35",
        "name": "邓小平诞辰100周年",
        "year": 2004,
        "theme": "人物",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=邓小平诞辰100周年"
    },
    {
        "id": "JB36",
        "name": "中国珍稀野生动物--华南虎",
        "year": 2004,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--华南虎"
    },
    {
        "id": "JB37",
        "name": "第29届奥林匹克运动会（第1组）",
        "year": 2006,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第1组）"
    },
    {
        "id": "JB38",
        "name": "第29届奥林匹克运动会（第2组）",
        "year": 2007,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第2组）"
    },
    {
        "id": "JB39",
        "name": "第29届奥林匹克运动会（第3组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第3组）"
    },
    {
        "id": "JB40",
        "name": "第29届奥林匹克运动会（第4组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第4组）"
    },
    {
        "id": "JB41",
        "name": "西藏和平解放50周年",
        "year": 2001,
        "theme": "地区",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=西藏和平解放50周年"
    },
    {
        "id": "JB42",
        "name": "内蒙古自治区成立60周年",
        "year": 2007,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=内蒙古自治区成立60周年"
    },
    {
        "id": "JB43",
        "name": "新疆维吾尔自治区成立50周年",
        "year": 2005,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=新疆维吾尔自治区成立50周年"
    },
    {
        "id": "JB44",
        "name": "宁夏回族自治区成立50周年",
        "year": 2008,
        "theme": "自治区成立",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=宁夏回族自治区成立50周年"
    },
    {
        "id": "JB45",
        "name": "中国珍稀野生动物--藏羚羊",
        "year": 2006,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--藏羚羊"
    },
    {
        "id": "JB46",
        "name": "中国珍稀野生动物--白鳍豚",
        "year": 2007,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--白鳍豚"
    },
    {
        "id": "JB47",
        "name": "第29届奥林匹克运动会（第5组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第5组）"
    },
    {
        "id": "JB48",
        "name": "第29届奥林匹克运动会（第6组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第6组）"
    },
    {
        "id": "JB49",
        "name": "第29届奥林匹克运动会（第7组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第7组）"
    },
    {
        "id": "JB50",
        "name": "第29届奥林匹克运动会（第8组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第8组）"
    },
    {
        "id": "JB51",
        "name": "第29届奥林匹克运动会（第9组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第9组）"
    },
    {
        "id": "JB52",
        "name": "第29届奥林匹克运动会（第10组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第10组）"
    },
    {
        "id": "JB53",
        "name": "第29届奥林匹克运动会（第11组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第11组）"
    },
    {
        "id": "JB54",
        "name": "第29届奥林匹克运动会（第12组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第12组）"
    },
    {
        "id": "JB55",
        "name": "第29届奥林匹克运动会（第13组）",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会（第13组）"
    },
    {
        "id": "JB56",
        "name": "中国珍稀野生动物--丹顶鹤",
        "year": 2008,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--丹顶鹤"
    },
    {
        "id": "JB57",
        "name": "2003年贺岁",
        "year": 2003,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2003年贺岁"
    },
    {
        "id": "JB58",
        "name": "2004年贺岁",
        "year": 2004,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2004年贺岁"
    },
    {
        "id": "JB59",
        "name": "2005年贺岁",
        "year": 2005,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2005年贺岁"
    },
    {
        "id": "JB60",
        "name": "2006年贺岁",
        "year": 2006,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2006年贺岁"
    },
    {
        "id": "JB61",
        "name": "2007年贺岁",
        "year": 2007,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2007年贺岁"
    },
    {
        "id": "JB62",
        "name": "2008年贺岁",
        "year": 2008,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2008年贺岁"
    },
    {
        "id": "JB63",
        "name": "世界文化遗产－长城",
        "year": 2003,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产－长城"
    },
    {
        "id": "JB64",
        "name": "世界文化遗产－秦始皇陵及兵马俑坑",
        "year": 2004,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产－秦始皇陵及兵马俑坑"
    },
    {
        "id": "JB65",
        "name": "世界文化遗产－丽江古城",
        "year": 2005,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产－丽江古城"
    },
    {
        "id": "JB66",
        "name": "世界文化遗产－龙门石窟",
        "year": 2006,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产－龙门石窟"
    },
    {
        "id": "JB67",
        "name": "世界文化遗产－颐和园",
        "year": 2006,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产－颐和园"
    },
    {
        "id": "JB68",
        "name": "2007年贺岁",
        "year": 2007,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2007年贺岁"
    },
    {
        "id": "JB69",
        "name": "第29届奥林匹克运动会体操",
        "year": 2007,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会体操"
    },
    {
        "id": "JB70",
        "name": "第29届奥林匹克运动会射箭",
        "year": 2007,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会射箭"
    },
    {
        "id": "JB71",
        "name": "第29届奥林匹克运动会乒乓球",
        "year": 2007,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会乒乓球"
    },
    {
        "id": "JB72",
        "name": "2008年贺岁",
        "year": 2008,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2008年贺岁"
    },
    {
        "id": "JB73",
        "name": "第29届奥林匹克运动会足球",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会足球"
    },
    {
        "id": "JB74",
        "name": "第29届奥林匹克运动会击剑",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会击剑"
    },
    {
        "id": "JB75",
        "name": "第29届奥林匹克运动会现代五项",
        "year": 2008,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会现代五项"
    },
    {
        "id": "JC03",
        "name": "第29届奥林匹克运动会(纪念钞)",
        "year": 2008,
        "theme": "体育",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第29届奥林匹克运动会(纪念钞)"
    },
    {
        "id": "JB76",
        "name": "2009年贺岁",
        "year": 2009,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2009年贺岁"
    },
    {
        "id": "JB77",
        "name": "“和”字书法——篆书",
        "year": 2009,
        "theme": "文化",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=“和”字书法——篆书"
    },
    {
        "id": "JB78",
        "name": "环境保护（关注）",
        "year": 2009,
        "theme": "环保",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=环境保护（关注）"
    },
    {
        "id": "JB79",
        "name": "上海世界博览会",
        "year": 2010,
        "theme": "博览会",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=上海世界博览会"
    },
    {
        "id": "JB80",
        "name": "2010年贺岁",
        "year": 2010,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2010年贺岁"
    },
    {
        "id": "JB81",
        "name": "“和”字书法——隶书",
        "year": 2010,
        "theme": "文化",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=“和”字书法——隶书"
    },
    {
        "id": "JB82",
        "name": "环境保护（参与）",
        "year": 2010,
        "theme": "环保",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=环境保护（参与）"
    },
    {
        "id": "JB83",
        "name": "中国共产党成立90周年",
        "year": 2011,
        "theme": "党建",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国共产党成立90周年"
    },
    {
        "id": "JB84",
        "name": "2011年贺岁",
        "year": 2011,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2011年贺岁"
    },
    {
        "id": "JB85",
        "name": "第26届世界大学生夏季运动会",
        "year": 2011,
        "theme": "体育",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=第26届世界大学生夏季运动会"
    },
    {
        "id": "JB86",
        "name": "世界文化遗产—曲阜孔庙、孔林、孔府",
        "year": 2012,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产—曲阜孔庙、孔林、孔府"
    },
    {
        "id": "JB87",
        "name": "2012年贺岁",
        "year": 2012,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2012年贺岁"
    },
    {
        "id": "JB88",
        "name": "中国京剧艺术",
        "year": 2012,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB89",
        "name": "2013年贺岁",
        "year": 2013,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2013年贺岁"
    },
    {
        "id": "JB90",
        "name": "世界文化遗产—平遥古城",
        "year": 2013,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产—平遥古城"
    },
    {
        "id": "JB91",
        "name": "世界文化遗产—峨眉山与乐山大佛",
        "year": 2014,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产—峨眉山与乐山大佛"
    },
    {
        "id": "JB92",
        "name": "2014年贺岁",
        "year": 2014,
        "theme": "贺岁",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2014年贺岁"
    },
    {
        "id": "JB93",
        "name": "“和”字书法——行书",
        "year": 2014,
        "theme": "文化",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=“和”字书法——行书"
    },
    {
        "id": "JB94",
        "name": "2015年贺岁",
        "year": 2015,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2015年贺岁"
    },
    {
        "id": "JB95",
        "name": "世界文化遗产—武当山古建筑群",
        "year": 2015,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产—武当山古建筑群"
    },
    {
        "id": "JB96",
        "name": "中国航天",
        "year": 2015,
        "theme": "科技",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国航天"
    },
    {
        "id": "JB97",
        "name": "中国珍稀野生动物--扬子鳄",
        "year": 2016,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--扬子鳄"
    },
    {
        "id": "JB98",
        "name": "2016年贺岁",
        "year": 2016,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2016年贺岁"
    },
    {
        "id": "JB99",
        "name": "孙中山诞辰150周年",
        "year": 2016,
        "theme": "人物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=孙中山诞辰150周年"
    },
    {
        "id": "JB100",
        "name": "2017年贺岁",
        "year": 2017,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2017年贺岁"
    },
    {
        "id": "JB101",
        "name": "“和”字书法——草书",
        "year": 2017,
        "theme": "文化",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=“和”字书法——草书"
    },
    {
        "id": "JB102",
        "name": "2018年贺岁",
        "year": 2018,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2018年贺岁"
    },
    {
        "id": "JB103",
        "name": "中国高铁",
        "year": 2018,
        "theme": "科技",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国高铁"
    },
    {
        "id": "JB104",
        "name": "中国京剧艺术",
        "year": 2018,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB105",
        "name": "2019年贺岁",
        "year": 2019,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2019年贺岁"
    },
    {
        "id": "JB106",
        "name": "中国高铁（第2组）",
        "year": 2019,
        "theme": "科技",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国高铁（第2组）"
    },
    {
        "id": "JB107",
        "name": "世界文化遗产—长城",
        "year": 2019,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产—长城"
    },
    {
        "id": "JB108",
        "name": "2020年贺岁",
        "year": 2020,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2020年贺岁"
    },
    {
        "id": "JB109",
        "name": "中国京剧艺术",
        "year": 2020,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB110",
        "name": "2021年贺岁",
        "year": 2021,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2021年贺岁"
    },
    {
        "id": "JB111",
        "name": "中国京剧艺术",
        "year": 2021,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB112",
        "name": "2022年贺岁",
        "year": 2022,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2022年贺岁"
    },
    {
        "id": "JB113",
        "name": "中国京剧艺术",
        "year": 2022,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB114",
        "name": "世界文化和自然遗产—泰山",
        "year": 2022,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化和自然遗产—泰山"
    },
    {
        "id": "JB115",
        "name": "2023年贺岁",
        "year": 2023,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2023年贺岁"
    },
    {
        "id": "JB116",
        "name": "中国京剧艺术",
        "year": 2023,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB117",
        "name": "2024年贺岁",
        "year": 2024,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2024年贺岁"
    },
    {
        "id": "JB118",
        "name": "“和”字书法——楷书",
        "year": 2024,
        "theme": "文化",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=“和”字书法——楷书"
    },
    {
        "id": "JB119",
        "name": "中国京剧艺术",
        "year": 2024,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB120",
        "name": "世界文化遗产－长城",
        "year": 2024,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化遗产－长城"
    },
    {
        "id": "JB121",
        "name": "中国珍稀野生动物--白鳍豚",
        "year": 2024,
        "theme": "动物",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国珍稀野生动物--白鳍豚"
    },
    {
        "id": "JB122",
        "name": "2025年贺岁",
        "year": 2025,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2025年贺岁"
    },
    {
        "id": "JB123",
        "name": "中国京剧艺术",
        "year": 2025,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB124",
        "name": "世界文化和自然遗产—黄山",
        "year": 2025,
        "theme": "文化遗产",
        "denomination": "5元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=世界文化和自然遗产—黄山"
    },
    {
        "id": "JB125",
        "name": "2026年贺岁",
        "year": 2026,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2026年贺岁"
    },
    {
        "id": "JB126",
        "name": "中国京剧艺术",
        "year": 2026,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB127",
        "name": "2027年贺岁",
        "year": 2027,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2027年贺岁"
    },
    {
        "id": "JB128",
        "name": "中国京剧艺术",
        "year": 2027,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB129",
        "name": "2028年贺岁",
        "year": 2028,
        "theme": "贺岁",
        "denomination": "10元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=2028年贺岁"
    },
    {
        "id": "JB130",
        "name": "中国京剧艺术",
        "year": 2028,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    },
    {
        "id": "JB131",
        "name": "中国京剧艺术",
        "year": 2029,
        "theme": "艺术",
        "denomination": "1元",
        "imageUrl": "https://www.cbpm.cn/cn/rmbpic/rmbpic6/202412/P020241219370620873816.png?text=中国京剧艺术"
    }
]
        ];

        let myCollection = []; // 存储已收藏的纪念币ID
        const storageKey = 'myCoinCollection'; // 本地存储的键名
        let currentSortOrder = 'desc';

        const mainContainer = document.getElementById('main-container');
        const countDisplay = document.getElementById('countDisplay');
        const themeFilter = document.getElementById('themeFilter');
        const denominationFilter = document.getElementById('denominationFilter');
        const sortOrderToggle = document.getElementById('sortOrderToggle');
        const saveStatus = document.getElementById('save-status');

        // 加载本地收藏数据
        function loadCollection() {
            try {
                const savedCollection = localStorage.getItem(storageKey);
                if (savedCollection) {
                    myCollection = JSON.parse(savedCollection);
                } else {
                    myCollection = [];
                }
            } catch (e) {
                console.error("加载本地收藏数据失败:", e);
                myCollection = [];
            }
        }

        // 保存收藏数据到本地
        function saveCollection() {
            try {
                localStorage.setItem(storageKey, JSON.stringify(myCollection));
                // 显示保存状态
                saveStatus.style.opacity = '1';
                setTimeout(() => {
                    saveStatus.style.opacity = '0';
                }, 2000);
            } catch (e) {
                console.error("保存本地收藏数据失败:", e);
            }
        }

        // 渲染 UI
        function renderUI() {
            mainContainer.innerHTML = '';

            const selectedTheme = themeFilter.value;
            const selectedDenomination = denominationFilter.value;

            // 筛选纪念币
            let filteredCoins = allCoinsData.filter(coin => {
                const matchesTheme = selectedTheme === '' || coin.theme === selectedTheme;
                const matchesDenomination = selectedDenomination === '' || coin.denomination === selectedDenomination;
                return matchesTheme && matchesDenomination;
            });

            // 按年份分组
            const groupedCoins = filteredCoins.reduce((acc, coin) => {
                const year = coin.year;
                if (!acc[year]) {
                    acc[year] = [];
                }
                acc[year].push(coin);
                return acc;
            }, {});

            // 排序年份
            const sortedYears = Object.keys(groupedCoins).sort((a, b) => currentSortOrder === 'desc' ? b - a : a - b);

            const totalCoins = allCoinsData.length;
            const collectedCoinsCount = myCollection.length;
            countDisplay.textContent = `已收藏 ${collectedCoinsCount} / ${totalCoins} 枚`;

            if (Object.keys(groupedCoins).length === 0) {
                mainContainer.innerHTML = '<p class="text-center text-gray-500 text-xl mt-10">没有找到符合条件的纪念币。</p>';
            }

            // 渲染每个年份组
            sortedYears.forEach(year => {
                const yearSection = document.createElement('div');
                yearSection.className = 'my-8';
                yearSection.innerHTML = `
                    <h2 class="text-2xl font-bold mb-4 text-center md:text-left">${year}年</h2>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 justify-center"></div>
                `;
                const coinGrid = yearSection.querySelector('div.grid');

                groupedCoins[year].forEach(coin => {
                    const isCollected = myCollection.includes(coin.id);
                    const coinCard = document.createElement('div');
                    coinCard.className = `flex flex-col items-center p-4 bg-gray-100 rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 cursor-pointer relative ${isCollected ? 'collected' : ''}`;
                    coinCard.setAttribute('data-coin-id', coin.id);

                    const imgClass = isCollected ? 'filter-none' : 'grayscale';
                    coinCard.innerHTML = `
                        <img src="${coin.imageUrl}" alt="${coin.name}" class="w-full h-auto rounded-lg ${imgClass} transition-all duration-500 ease-in-out" onerror="this.onerror=null;this.src='https://placehold.co/300x300/F0F0F0/888888?text=图片丢失'">
                        <div class="mt-4 text-center">
                            <p class="font-semibold text-lg">${coin.name}</p>
                            <p class="text-sm text-gray-600">${coin.denomination}</p>
                        </div>
                    `;
                    coinGrid.appendChild(coinCard);

                    // 为卡片添加点击事件监听器
                    coinCard.addEventListener('click', () => toggleCollected(coin.id));
                });

                mainContainer.appendChild(yearSection);
            });
        }

        // 切换收藏状态并保存
        function toggleCollected(coinId) {
            const index = myCollection.indexOf(coinId);
            if (index > -1) {
                myCollection.splice(index, 1); // 移除
            } else {
                myCollection.push(coinId); // 添加
            }
            saveCollection();
            renderUI();
        }

        // 填充筛选下拉菜单
        function populateFilters(coins) {
            const themes = [...new Set(coins.map(coin => coin.theme))].sort();
            const denominations = [...new Set(coins.map(coin => coin.denomination))].sort();

            themeFilter.innerHTML = '<option value="">所有主题</option>' + themes.map(t => `<option value="${t}">${t}</option>`).join('');
            denominationFilter.innerHTML = '<option value="">所有面额</option>' + denominations.map(d => `<option value="${d}">${d}</option>`).join('');

            themeFilter.addEventListener('change', () => renderUI());
            denominationFilter.addEventListener('change', () => renderUI());
            sortOrderToggle.addEventListener('click', () => {
                currentSortOrder = currentSortOrder === 'desc' ? 'asc' : 'desc';
                sortOrderToggle.innerHTML = currentSortOrder === 'desc' ? `年份倒序 <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414V16a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3z" clip-rule="evenodd" /></svg>` : `年份正序 <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 17a1 1 0 01-.707-.293l-3-3a1 1 0 011.414-1.414L10 14.586V4a1 1 0 112 0v10.586l1.293-1.293a1 1 0 111.414 1.414l-3 3A1 1 0 0110 17z" clip-rule="evenodd" /></svg>`;
                renderUI();
            });
        }

        // 初始化应用
        window.onload = () => {
            loadCollection();
            populateFilters(allCoinsData);
            renderUI();
        };

    </script>
</body>
</html>

